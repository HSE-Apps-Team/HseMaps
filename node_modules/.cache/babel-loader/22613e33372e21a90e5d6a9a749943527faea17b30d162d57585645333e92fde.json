{"ast":null,"code":"import { StateManager } from './StateManager.js';\nimport { RenderingModule } from './RenderingModule.js';\nimport { UtilityModule } from './UtilityModule.js';\nimport { DOMCache } from './DOMCache.js';\nimport { Config } from '../config/config.js';\n\n/**\r\n * EventHandlingModule - Manages UI event handling and synchronization\r\n * Coordinates scroll position, slider value, and agent movement\r\n * \r\n * @module EventHandlingModule\r\n */\nexport const EventHandlingModule = {\n  markShortestPathFromInput() {\n    RenderingModule.refresh();\n    DOMCache[Config.SVG.SELECTORS.PROGBAR].value = 0;\n    DOMCache[Config.SVG.SELECTORS.SCROLL].scrollTop = 0;\n    const start = document.getElementById(\"start\").value.toUpperCase();\n    const end = document.getElementById(\"end\").value.toUpperCase();\n    UtilityModule.markShortestPath(start, end);\n    UtilityModule.configureScroll();\n  },\n  /**\r\n   * Handles navigation through schedule waypoints\r\n   * Updates input fields and triggers path calculation\r\n   * \r\n   * @example\r\n   * // Given schedule input \"ROOM101,ROOM102,ROOM103\"\r\n   * navSchedule()  \r\n   * // Sets start=\"ROOM101\", end=\"ROOM102\"\r\n   * // Next call sets start=\"ROOM102\", end=\"ROOM103\"\r\n   * // Next call resets to beginning\r\n   */\n  navSchedule() {\n    RenderingModule.refresh();\n    const sched = document.getElementById(\"sched\");\n    const classes = sched.value.split(\",\");\n    const iterator = StateManager.get('iterator');\n    const from = classes[iterator - 1];\n    const to = classes[iterator];\n    document.getElementById(\"start\").value = from;\n    document.getElementById(\"end\").value = to;\n    this.markShortestPathFromInput();\n    StateManager.set('iterator', iterator + 1);\n    if (iterator === classes.length - 1) StateManager.set('iterator', 1);\n  },\n  /**\r\n   * Synchronizes scroll position with slider value and updates agent\r\n   * Called on scroll events to maintain visual synchronization\r\n   * \r\n   * @example Input/Output\r\n   * // When user scrolls to position 150:\r\n   * // scroll.scrollTop = 150\r\n   * // -> sets slider.value = 150\r\n   * // -> triggers agent update at position 150\r\n   * \r\n   * @example Usage\r\n   * const scroll = document.getElementById(\"scroll\");\r\n   * scroll.scrollTop = 100;\r\n   * updateSliderValue();\r\n   * // Results in:\r\n   * // - slider.value = 100\r\n   * // - agent position updated to 100\r\n   */\n  updateSliderValue() {\n    const slider = DOMCache[Config.SVG.SELECTORS.PROGBAR];\n    const scroll = DOMCache[Config.SVG.SELECTORS.SCROLL];\n\n    // Update slider value from scroll position\n    slider.value = scroll.scrollTop;\n\n    // Update agent position\n    UtilityModule.updateAgent();\n  }\n};\n\n/**\r\n * Event Bindings\r\n * Connects DOM events to handler functions\r\n * \r\n * @example Scroll Event\r\n * // When user scrolls the container:\r\n * scroll.onscroll -> updateSliderValue() -> UtilityModule.updateAgent()\r\n * \r\n * @example Slider Input\r\n * // When user moves the slider:\r\n * progbar.oninput -> UtilityModule.updateAgent()\r\n */\n\n// Direct scroll event binding\ndocument.getElementById(\"scroll\").onscroll = () => EventHandlingModule.updateSliderValue();\n\n// Direct slider input binding\ndocument.getElementById(\"progbar\").oninput = () => UtilityModule.updateAgent();\n\n/**\r\n * Updates the body's data-theme attribute based on the selected theme\r\n * \r\n * @example\r\n * // When user selects \"dark\" from the theme dropdown:\r\n * // themeDropdown.value = \"dark\"\r\n * // -> sets document.body.dataset.theme = \"dark\"\r\n */\nfunction updateTheme() {\n  const themeDropdown = document.getElementById(\"theme-dropdown\");\n  const selectedTheme = themeDropdown.value;\n  document.body.dataset.theme = selectedTheme;\n}\n\n// Bind theme dropdown change event to updateTheme function\ndocument.getElementById(\"theme-dropdown\").onchange = updateTheme;","map":{"version":3,"names":["StateManager","RenderingModule","UtilityModule","DOMCache","Config","EventHandlingModule","markShortestPathFromInput","refresh","SVG","SELECTORS","PROGBAR","value","SCROLL","scrollTop","start","document","getElementById","toUpperCase","end","markShortestPath","configureScroll","navSchedule","sched","classes","split","iterator","get","from","to","set","length","updateSliderValue","slider","scroll","updateAgent","onscroll","oninput","updateTheme","themeDropdown","selectedTheme","body","dataset","theme","onchange"],"sources":["C:/Users/rexrt/Downloads/hsenavrepo/HseMaps/src/modules/EventHandlingModule.js"],"sourcesContent":["import { StateManager } from './StateManager.js';\r\nimport { RenderingModule } from './RenderingModule.js';\r\nimport { UtilityModule } from './UtilityModule.js';\r\nimport { DOMCache } from './DOMCache.js';\r\nimport { Config } from '../config/config.js';\r\n\r\n/**\r\n * EventHandlingModule - Manages UI event handling and synchronization\r\n * Coordinates scroll position, slider value, and agent movement\r\n * \r\n * @module EventHandlingModule\r\n */\r\nexport const EventHandlingModule = {\r\n    markShortestPathFromInput() {\r\n        RenderingModule.refresh();\r\n        DOMCache[Config.SVG.SELECTORS.PROGBAR].value = 0;\r\n        DOMCache[Config.SVG.SELECTORS.SCROLL].scrollTop = 0;\r\n        const start = document.getElementById(\"start\").value.toUpperCase();\r\n        const end = document.getElementById(\"end\").value.toUpperCase();\r\n        UtilityModule.markShortestPath(start, end);\r\n        UtilityModule.configureScroll();\r\n    },\r\n\r\n    /**\r\n     * Handles navigation through schedule waypoints\r\n     * Updates input fields and triggers path calculation\r\n     * \r\n     * @example\r\n     * // Given schedule input \"ROOM101,ROOM102,ROOM103\"\r\n     * navSchedule()  \r\n     * // Sets start=\"ROOM101\", end=\"ROOM102\"\r\n     * // Next call sets start=\"ROOM102\", end=\"ROOM103\"\r\n     * // Next call resets to beginning\r\n     */\r\n    navSchedule() {\r\n        RenderingModule.refresh();\r\n        const sched = document.getElementById(\"sched\");\r\n        const classes = sched.value.split(\",\");\r\n        const iterator = StateManager.get('iterator');\r\n        const from = classes[iterator - 1];\r\n        const to = classes[iterator];\r\n        document.getElementById(\"start\").value = from;\r\n        document.getElementById(\"end\").value = to;\r\n        this.markShortestPathFromInput();\r\n        StateManager.set('iterator', iterator + 1);\r\n        if (iterator === classes.length - 1) StateManager.set('iterator', 1);\r\n    },\r\n\r\n    /**\r\n     * Synchronizes scroll position with slider value and updates agent\r\n     * Called on scroll events to maintain visual synchronization\r\n     * \r\n     * @example Input/Output\r\n     * // When user scrolls to position 150:\r\n     * // scroll.scrollTop = 150\r\n     * // -> sets slider.value = 150\r\n     * // -> triggers agent update at position 150\r\n     * \r\n     * @example Usage\r\n     * const scroll = document.getElementById(\"scroll\");\r\n     * scroll.scrollTop = 100;\r\n     * updateSliderValue();\r\n     * // Results in:\r\n     * // - slider.value = 100\r\n     * // - agent position updated to 100\r\n     */\r\n    updateSliderValue() {\r\n        const slider = DOMCache[Config.SVG.SELECTORS.PROGBAR];\r\n        const scroll = DOMCache[Config.SVG.SELECTORS.SCROLL];\r\n        \r\n        // Update slider value from scroll position\r\n        slider.value = scroll.scrollTop;\r\n        \r\n        // Update agent position\r\n        UtilityModule.updateAgent();\r\n    }\r\n};\r\n\r\n/**\r\n * Event Bindings\r\n * Connects DOM events to handler functions\r\n * \r\n * @example Scroll Event\r\n * // When user scrolls the container:\r\n * scroll.onscroll -> updateSliderValue() -> UtilityModule.updateAgent()\r\n * \r\n * @example Slider Input\r\n * // When user moves the slider:\r\n * progbar.oninput -> UtilityModule.updateAgent()\r\n */\r\n\r\n// Direct scroll event binding\r\ndocument.getElementById(\"scroll\").onscroll = () => EventHandlingModule.updateSliderValue();\r\n\r\n// Direct slider input binding\r\ndocument.getElementById(\"progbar\").oninput = () => UtilityModule.updateAgent();\r\n\r\n/**\r\n * Updates the body's data-theme attribute based on the selected theme\r\n * \r\n * @example\r\n * // When user selects \"dark\" from the theme dropdown:\r\n * // themeDropdown.value = \"dark\"\r\n * // -> sets document.body.dataset.theme = \"dark\"\r\n */\r\nfunction updateTheme() {\r\n    const themeDropdown = document.getElementById(\"theme-dropdown\");\r\n    const selectedTheme = themeDropdown.value;\r\n    document.body.dataset.theme = selectedTheme;\r\n}\r\n\r\n// Bind theme dropdown change event to updateTheme function\r\ndocument.getElementById(\"theme-dropdown\").onchange = updateTheme;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}