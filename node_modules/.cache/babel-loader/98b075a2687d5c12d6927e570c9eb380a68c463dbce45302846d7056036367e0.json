{"ast":null,"code":"import { CoreService } from '../services/CoreService.js';\nimport { RenderingModule } from './RenderingModule.js';\nimport { DOMCache } from './DOMCache.js';\nimport { Config } from '../config/config.js';\nimport mainFloorImage from '../elements/mainfloorcrunched.png';\nimport combFloorImage from '../elements/combscaled.png';\n\n/**\r\n * @module EventHandlingModule\r\n * @description Simplified event handling for user interactions\r\n */\nexport const EventHandlingModule = {\n  /**\r\n   * @function handlePathRequest\r\n   * @async\r\n   * @description Processes navigation requests between rooms\r\n   */\n  async handlePathRequest() {\n    var _document$getElementB, _document$getElementB2, _document$getElementB3, _document$getElementB4;\n    const start = (_document$getElementB = document.getElementById(\"start\")) === null || _document$getElementB === void 0 ? void 0 : (_document$getElementB2 = _document$getElementB.value) === null || _document$getElementB2 === void 0 ? void 0 : _document$getElementB2.toUpperCase();\n    const end = (_document$getElementB3 = document.getElementById(\"end\")) === null || _document$getElementB3 === void 0 ? void 0 : (_document$getElementB4 = _document$getElementB3.value) === null || _document$getElementB4 === void 0 ? void 0 : _document$getElementB4.toUpperCase();\n    const result = await CoreService.findPath(start, end);\n    if (!result.success) {\n      alert(result.error);\n      RenderingModule.refresh();\n      return;\n    }\n\n    // Update UI with new path\n    RenderingModule.renderPath(result.path);\n    CoreService.setState('pathProgress', 0);\n    this.initializeAgentMovement();\n  },\n  /**\r\n   * @function initializeAgentMovement\r\n   * @description Sets up agent for path following\r\n   */\n  initializeAgentMovement() {\n    // Clear any existing animation\n    if (CoreService.getState('animationId')) {\n      cancelAnimationFrame(CoreService.getState('animationId'));\n    }\n\n    // Initialize position\n    CoreService.updateAgentPosition(0);\n\n    // Center view on agent\n    const agentElement = DOMCache[Config.SVG.SELECTORS.AGENT];\n    if (agentElement) {\n      this.centerViewOnElement(agentElement);\n    }\n  },\n  /**\r\n   * @function centerViewOnElement\r\n   * @description Centers the viewport on a specific element\r\n   * @param {Element} element - DOM element to center on\r\n   */\n  centerViewOnElement(element) {\n    if (!element) return;\n    const svgdiv = DOMCache[Config.SVG.SELECTORS.SVGDIV];\n    if (!svgdiv) return;\n    const rect = element.getBoundingClientRect();\n    const centerX = rect.left + rect.width / 2;\n    const centerY = rect.top + rect.height / 2;\n    svgdiv.scrollLeft = centerX - svgdiv.clientWidth / 2;\n    svgdiv.scrollTop = centerY - svgdiv.clientHeight / 2;\n  },\n  /**\r\n   * @function setupEventListeners\r\n   * @description Initializes all event listeners for UI interactions\r\n   */\n  setupEventListeners() {\n    // Navigation button\n    const navButton = document.getElementById('navigate-button');\n    if (navButton) {\n      navButton.addEventListener('click', () => this.handlePathRequest());\n    }\n\n    // Floor switch buttons\n    const mainFloorBtn = document.getElementById('main-floor-btn');\n    const combFloorBtn = document.getElementById('comb-floor-btn');\n    if (mainFloorBtn) {\n      mainFloorBtn.addEventListener('click', () => {\n        RenderingModule.switchFloor('main', mainFloorImage);\n      });\n    }\n    if (combFloorBtn) {\n      combFloorBtn.addEventListener('click', () => {\n        RenderingModule.switchFloor('comb', combFloorImage);\n      });\n    }\n  }\n};","map":{"version":3,"names":["CoreService","RenderingModule","DOMCache","Config","mainFloorImage","combFloorImage","EventHandlingModule","handlePathRequest","_document$getElementB","_document$getElementB2","_document$getElementB3","_document$getElementB4","start","document","getElementById","value","toUpperCase","end","result","findPath","success","alert","error","refresh","renderPath","path","setState","initializeAgentMovement","getState","cancelAnimationFrame","updateAgentPosition","agentElement","SVG","SELECTORS","AGENT","centerViewOnElement","element","svgdiv","SVGDIV","rect","getBoundingClientRect","centerX","left","width","centerY","top","height","scrollLeft","clientWidth","scrollTop","clientHeight","setupEventListeners","navButton","addEventListener","mainFloorBtn","combFloorBtn","switchFloor"],"sources":["C:/Users/rexrt/Downloads/hsenavrepo/HseMaps/src/modules/EventHandlingModule.js"],"sourcesContent":["import { CoreService } from '../services/CoreService.js';\r\nimport { RenderingModule } from './RenderingModule.js';\r\nimport { DOMCache } from './DOMCache.js';\r\nimport { Config } from '../config/config.js';\r\nimport mainFloorImage from '../elements/mainfloorcrunched.png';\r\nimport combFloorImage from '../elements/combscaled.png';\r\n\r\n/**\r\n * @module EventHandlingModule\r\n * @description Simplified event handling for user interactions\r\n */\r\nexport const EventHandlingModule = {\r\n    /**\r\n     * @function handlePathRequest\r\n     * @async\r\n     * @description Processes navigation requests between rooms\r\n     */\r\n    async handlePathRequest() {\r\n        const start = document.getElementById(\"start\")?.value?.toUpperCase();\r\n        const end = document.getElementById(\"end\")?.value?.toUpperCase();\r\n        \r\n        const result = await CoreService.findPath(start, end);\r\n        \r\n        if (!result.success) {\r\n            alert(result.error);\r\n            RenderingModule.refresh();\r\n            return;\r\n        }\r\n        \r\n        // Update UI with new path\r\n        RenderingModule.renderPath(result.path);\r\n        CoreService.setState('pathProgress', 0);\r\n        this.initializeAgentMovement();\r\n    },\r\n    \r\n    /**\r\n     * @function initializeAgentMovement\r\n     * @description Sets up agent for path following\r\n     */\r\n    initializeAgentMovement() {\r\n        // Clear any existing animation\r\n        if (CoreService.getState('animationId')) {\r\n            cancelAnimationFrame(CoreService.getState('animationId'));\r\n        }\r\n        \r\n        // Initialize position\r\n        CoreService.updateAgentPosition(0);\r\n        \r\n        // Center view on agent\r\n        const agentElement = DOMCache[Config.SVG.SELECTORS.AGENT];\r\n        if (agentElement) {\r\n            this.centerViewOnElement(agentElement);\r\n        }\r\n    },\r\n    \r\n    /**\r\n     * @function centerViewOnElement\r\n     * @description Centers the viewport on a specific element\r\n     * @param {Element} element - DOM element to center on\r\n     */\r\n    centerViewOnElement(element) {\r\n        if (!element) return;\r\n        \r\n        const svgdiv = DOMCache[Config.SVG.SELECTORS.SVGDIV];\r\n        if (!svgdiv) return;\r\n        \r\n        const rect = element.getBoundingClientRect();\r\n        const centerX = rect.left + rect.width / 2;\r\n        const centerY = rect.top + rect.height / 2;\r\n        \r\n        svgdiv.scrollLeft = centerX - svgdiv.clientWidth / 2;\r\n        svgdiv.scrollTop = centerY - svgdiv.clientHeight / 2;\r\n    },\r\n    \r\n    /**\r\n     * @function setupEventListeners\r\n     * @description Initializes all event listeners for UI interactions\r\n     */\r\n    setupEventListeners() {\r\n        // Navigation button\r\n        const navButton = document.getElementById('navigate-button');\r\n        if (navButton) {\r\n            navButton.addEventListener('click', () => this.handlePathRequest());\r\n        }\r\n        \r\n        // Floor switch buttons\r\n        const mainFloorBtn = document.getElementById('main-floor-btn');\r\n        const combFloorBtn = document.getElementById('comb-floor-btn');\r\n        \r\n        if (mainFloorBtn) {\r\n            mainFloorBtn.addEventListener('click', () => {\r\n                RenderingModule.switchFloor('main', mainFloorImage);\r\n            });\r\n        }\r\n        \r\n        if (combFloorBtn) {\r\n            combFloorBtn.addEventListener('click', () => {\r\n                RenderingModule.switchFloor('comb', combFloorImage);\r\n            });\r\n        }\r\n    }\r\n};"],"mappings":"AAAA,SAASA,WAAW,QAAQ,4BAA4B;AACxD,SAASC,eAAe,QAAQ,sBAAsB;AACtD,SAASC,QAAQ,QAAQ,eAAe;AACxC,SAASC,MAAM,QAAQ,qBAAqB;AAC5C,OAAOC,cAAc,MAAM,mCAAmC;AAC9D,OAAOC,cAAc,MAAM,4BAA4B;;AAEvD;AACA;AACA;AACA;AACA,OAAO,MAAMC,mBAAmB,GAAG;EAC/B;AACJ;AACA;AACA;AACA;EACI,MAAMC,iBAAiBA,CAAA,EAAG;IAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA;IACtB,MAAMC,KAAK,IAAAJ,qBAAA,GAAGK,QAAQ,CAACC,cAAc,CAAC,OAAO,CAAC,cAAAN,qBAAA,wBAAAC,sBAAA,GAAhCD,qBAAA,CAAkCO,KAAK,cAAAN,sBAAA,uBAAvCA,sBAAA,CAAyCO,WAAW,CAAC,CAAC;IACpE,MAAMC,GAAG,IAAAP,sBAAA,GAAGG,QAAQ,CAACC,cAAc,CAAC,KAAK,CAAC,cAAAJ,sBAAA,wBAAAC,sBAAA,GAA9BD,sBAAA,CAAgCK,KAAK,cAAAJ,sBAAA,uBAArCA,sBAAA,CAAuCK,WAAW,CAAC,CAAC;IAEhE,MAAME,MAAM,GAAG,MAAMlB,WAAW,CAACmB,QAAQ,CAACP,KAAK,EAAEK,GAAG,CAAC;IAErD,IAAI,CAACC,MAAM,CAACE,OAAO,EAAE;MACjBC,KAAK,CAACH,MAAM,CAACI,KAAK,CAAC;MACnBrB,eAAe,CAACsB,OAAO,CAAC,CAAC;MACzB;IACJ;;IAEA;IACAtB,eAAe,CAACuB,UAAU,CAACN,MAAM,CAACO,IAAI,CAAC;IACvCzB,WAAW,CAAC0B,QAAQ,CAAC,cAAc,EAAE,CAAC,CAAC;IACvC,IAAI,CAACC,uBAAuB,CAAC,CAAC;EAClC,CAAC;EAED;AACJ;AACA;AACA;EACIA,uBAAuBA,CAAA,EAAG;IACtB;IACA,IAAI3B,WAAW,CAAC4B,QAAQ,CAAC,aAAa,CAAC,EAAE;MACrCC,oBAAoB,CAAC7B,WAAW,CAAC4B,QAAQ,CAAC,aAAa,CAAC,CAAC;IAC7D;;IAEA;IACA5B,WAAW,CAAC8B,mBAAmB,CAAC,CAAC,CAAC;;IAElC;IACA,MAAMC,YAAY,GAAG7B,QAAQ,CAACC,MAAM,CAAC6B,GAAG,CAACC,SAAS,CAACC,KAAK,CAAC;IACzD,IAAIH,YAAY,EAAE;MACd,IAAI,CAACI,mBAAmB,CAACJ,YAAY,CAAC;IAC1C;EACJ,CAAC;EAED;AACJ;AACA;AACA;AACA;EACII,mBAAmBA,CAACC,OAAO,EAAE;IACzB,IAAI,CAACA,OAAO,EAAE;IAEd,MAAMC,MAAM,GAAGnC,QAAQ,CAACC,MAAM,CAAC6B,GAAG,CAACC,SAAS,CAACK,MAAM,CAAC;IACpD,IAAI,CAACD,MAAM,EAAE;IAEb,MAAME,IAAI,GAAGH,OAAO,CAACI,qBAAqB,CAAC,CAAC;IAC5C,MAAMC,OAAO,GAAGF,IAAI,CAACG,IAAI,GAAGH,IAAI,CAACI,KAAK,GAAG,CAAC;IAC1C,MAAMC,OAAO,GAAGL,IAAI,CAACM,GAAG,GAAGN,IAAI,CAACO,MAAM,GAAG,CAAC;IAE1CT,MAAM,CAACU,UAAU,GAAGN,OAAO,GAAGJ,MAAM,CAACW,WAAW,GAAG,CAAC;IACpDX,MAAM,CAACY,SAAS,GAAGL,OAAO,GAAGP,MAAM,CAACa,YAAY,GAAG,CAAC;EACxD,CAAC;EAED;AACJ;AACA;AACA;EACIC,mBAAmBA,CAAA,EAAG;IAClB;IACA,MAAMC,SAAS,GAAGvC,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC;IAC5D,IAAIsC,SAAS,EAAE;MACXA,SAAS,CAACC,gBAAgB,CAAC,OAAO,EAAE,MAAM,IAAI,CAAC9C,iBAAiB,CAAC,CAAC,CAAC;IACvE;;IAEA;IACA,MAAM+C,YAAY,GAAGzC,QAAQ,CAACC,cAAc,CAAC,gBAAgB,CAAC;IAC9D,MAAMyC,YAAY,GAAG1C,QAAQ,CAACC,cAAc,CAAC,gBAAgB,CAAC;IAE9D,IAAIwC,YAAY,EAAE;MACdA,YAAY,CAACD,gBAAgB,CAAC,OAAO,EAAE,MAAM;QACzCpD,eAAe,CAACuD,WAAW,CAAC,MAAM,EAAEpD,cAAc,CAAC;MACvD,CAAC,CAAC;IACN;IAEA,IAAImD,YAAY,EAAE;MACdA,YAAY,CAACF,gBAAgB,CAAC,OAAO,EAAE,MAAM;QACzCpD,eAAe,CAACuD,WAAW,CAAC,MAAM,EAAEnD,cAAc,CAAC;MACvD,CAAC,CAAC;IACN;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}